name: Keep Backend Alive

on:
  schedule:
    # Chạy mỗi 14 phút, từ 8h sáng đến 12h tối (giờ Việt Nam UTC+7 -> 1h-15h UTC)
    - cron: '*/14 1-17 * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping All Services
        run: |
          # Ping Render Backend (Chỉ ping endpoint nhẹ, KHÔNG đánh thức Neon DB)
          curl -I https://mycafe-backend-prx3.onrender.com/ping
          # Ping Vercel Frontend
          curl -I https://mycafe-omega.vercel.app/
          echo "Pings completed successfully at $(date)!"
